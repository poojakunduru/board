{"ast":null,"code":"import _classCallCheck from\"C:/Users/kprhs/OneDrive/Desktop/White/ui/whiteboard-collab/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/kprhs/OneDrive/Desktop/White/ui/whiteboard-collab/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/kprhs/OneDrive/Desktop/White/ui/whiteboard-collab/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/kprhs/OneDrive/Desktop/White/ui/whiteboard-collab/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import io from'socket.io-client';import'./style.css';import{jsx as _jsx}from\"react/jsx-runtime\";var Board=/*#__PURE__*/function(_React$Component){_inherits(Board,_React$Component);var _super=_createSuper(Board);function Board(props){var _this;_classCallCheck(this,Board);_this=_super.call(this,props);_this.socket=io.connect(\"http://localhost:3000\");_this.isDrawing=false;_this.socket.on(\"canvas-data\",function(data){var root=this;var interval=setInterval(function(){if(root.isDrawing)return;root.isDrawing=true;clearInterval(interval);var image=new Image();var canvas=document.querySelector('#board');var ctx=canvas.getContext('2d');image.onload=function(){ctx.drawImage(image,0,0);root.isDrawing=false;};image.src=data;},200);});return _this;}_createClass(Board,[{key:\"componentDidMount\",value:function componentDidMount(){this.drawOnCanvas();}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(newProps){this.ctx.strokeStyle=newProps.color;this.ctx.lineWidth=newProps.size;}},{key:\"drawOnCanvas\",value:function drawOnCanvas(){var canvas=document.querySelector('#board');this.ctx=canvas.getContext('2d');var ctx=this.ctx;var sketch=document.querySelector('#sketch');var sketch_style=getComputedStyle(sketch);canvas.width=parseInt(sketch_style.getPropertyValue('width'));canvas.height=parseInt(sketch_style.getPropertyValue('height'));var mouse={x:0,y:0};var last_mouse={x:0,y:0};/* Mouse Capturing Work */canvas.addEventListener('mousemove',function(e){last_mouse.x=mouse.x;last_mouse.y=mouse.y;mouse.x=e.pageX-this.offsetLeft;mouse.y=e.pageY-this.offsetTop;},false);/* Drawing on Paint App */ctx.lineWidth=this.props.size;ctx.lineJoin='round';ctx.lineCap='round';ctx.strokeStyle=this.props.color;canvas.addEventListener('mousedown',function(e){canvas.addEventListener('mousemove',onPaint,false);},false);canvas.addEventListener('mouseup',function(){canvas.removeEventListener('mousemove',onPaint,false);},false);var root=this;var onPaint=function onPaint(){ctx.beginPath();ctx.moveTo(last_mouse.x,last_mouse.y);ctx.lineTo(mouse.x,mouse.y);ctx.closePath();ctx.stroke();if(root.timeout!=undefined)clearTimeout(root.timeout);root.timeout=setTimeout(function(){var base64ImageData=canvas.toDataURL(\"image/png\");root.socket.emit(\"canvas-data\",base64ImageData);},1000);};}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{class:\"sketch\",id:\"sketch\",children:/*#__PURE__*/_jsx(\"canvas\",{className:\"board\",id:\"board\"})});}}]);return Board;}(React.Component);export default Board;","map":{"version":3,"names":["React","io","Board","props","socket","connect","isDrawing","on","data","root","interval","setInterval","clearInterval","image","Image","canvas","document","querySelector","ctx","getContext","onload","drawImage","src","drawOnCanvas","newProps","strokeStyle","color","lineWidth","size","sketch","sketch_style","getComputedStyle","width","parseInt","getPropertyValue","height","mouse","x","y","last_mouse","addEventListener","e","pageX","offsetLeft","pageY","offsetTop","lineJoin","lineCap","onPaint","removeEventListener","beginPath","moveTo","lineTo","closePath","stroke","timeout","undefined","clearTimeout","setTimeout","base64ImageData","toDataURL","emit","Component"],"sources":["C:/Users/kprhs/OneDrive/Desktop/White/ui/whiteboard-collab/src/components/board/Board.jsx"],"sourcesContent":["import React from 'react';\r\nimport io from 'socket.io-client';\r\n\r\nimport './style.css';\r\n\r\nclass Board extends React.Component {\r\n\r\n    timeout;\r\n    socket = io.connect(\"http://localhost:3000\");\r\n\r\n    ctx;\r\n    isDrawing = false;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.socket.on(\"canvas-data\", function(data){\r\n\r\n            var root = this;\r\n            var interval = setInterval(function(){\r\n                if(root.isDrawing) return;\r\n                root.isDrawing = true;\r\n                clearInterval(interval);\r\n                var image = new Image();\r\n                var canvas = document.querySelector('#board');\r\n                var ctx = canvas.getContext('2d');\r\n                image.onload = function() {\r\n                    ctx.drawImage(image, 0, 0);\r\n\r\n                    root.isDrawing = false;\r\n                };\r\n                image.src = data;\r\n            }, 200)\r\n        })\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.drawOnCanvas();\r\n    }\r\n\r\n    componentWillReceiveProps(newProps) {\r\n        this.ctx.strokeStyle = newProps.color;\r\n        this.ctx.lineWidth = newProps.size;\r\n    }\r\n\r\n    drawOnCanvas() {\r\n        var canvas = document.querySelector('#board');\r\n        this.ctx = canvas.getContext('2d');\r\n        var ctx = this.ctx;\r\n\r\n        var sketch = document.querySelector('#sketch');\r\n        var sketch_style = getComputedStyle(sketch);\r\n        canvas.width = parseInt(sketch_style.getPropertyValue('width'));\r\n        canvas.height = parseInt(sketch_style.getPropertyValue('height'));\r\n\r\n        var mouse = {x: 0, y: 0};\r\n        var last_mouse = {x: 0, y: 0};\r\n\r\n        /* Mouse Capturing Work */\r\n        canvas.addEventListener('mousemove', function(e) {\r\n            last_mouse.x = mouse.x;\r\n            last_mouse.y = mouse.y;\r\n\r\n            mouse.x = e.pageX - this.offsetLeft;\r\n            mouse.y = e.pageY - this.offsetTop;\r\n        }, false);\r\n\r\n\r\n        /* Drawing on Paint App */\r\n        ctx.lineWidth = this.props.size;\r\n        ctx.lineJoin = 'round';\r\n        ctx.lineCap = 'round';\r\n        ctx.strokeStyle = this.props.color;\r\n\r\n        canvas.addEventListener('mousedown', function(e) {\r\n            canvas.addEventListener('mousemove', onPaint, false);\r\n        }, false);\r\n\r\n        canvas.addEventListener('mouseup', function() {\r\n            canvas.removeEventListener('mousemove', onPaint, false);\r\n        }, false);\r\n\r\n        var root = this;\r\n        var onPaint = function() {\r\n            ctx.beginPath();\r\n            ctx.moveTo(last_mouse.x, last_mouse.y);\r\n            ctx.lineTo(mouse.x, mouse.y);\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n\r\n            if(root.timeout != undefined) clearTimeout(root.timeout);\r\n            root.timeout = setTimeout(function(){\r\n                var base64ImageData = canvas.toDataURL(\"image/png\");\r\n                root.socket.emit(\"canvas-data\", base64ImageData);\r\n            }, 1000)\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div class=\"sketch\" id=\"sketch\">\r\n                <canvas className=\"board\" id=\"board\"></canvas>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Board"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}